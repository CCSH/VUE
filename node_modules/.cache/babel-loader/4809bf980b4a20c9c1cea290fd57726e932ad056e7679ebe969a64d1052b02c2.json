{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookie from 'js-cookie';\nexport default {\n  state: {\n    uploadFileUrl: '',\n    userInfo: {\n      info: ''\n    },\n    isCollapse: false,\n    tabList: [{\n      path: '/',\n      name: 'home',\n      label: '首页',\n      url: 'Home/Home'\n    }],\n    menu: [],\n    menuArr: []\n  },\n  mutations: {\n    collapseMenu(state) {\n      state.isCollapse = !state.isCollapse;\n    },\n    selectMenu(state, val) {\n      if (val.name !== 'home') {\n        const index = state.tabList.findIndex(item => item.name === val.name);\n        if (index < 0) {\n          state.tabList.push(val);\n        }\n      }\n    },\n    closeMenu(state, val) {\n      state.tabList.forEach((item, index) => {\n        if (item.name === val.name) {\n          state.tabList.splice(index, 1);\n        }\n      });\n    },\n    saveUserInfo(state, val) {\n      state.userInfo = val;\n      Cookie.set('userInfo', JSON.stringify(val));\n    },\n    handleRouter(state, router) {\n      if (!Cookie.get('userInfo')) {\n        return;\n      }\n      var userInfo = JSON.parse(Cookie.get('userInfo'));\n      //处理菜单\n      var menu = [];\n      switch (userInfo.info) {\n        case 'admin':\n          {\n            menu = [{\n              path: '/home',\n              name: 'home',\n              label: '首页',\n              url: 'Home'\n            }, {\n              path: '/mall',\n              name: 'mall',\n              label: '商品管理',\n              url: 'Mall'\n            }, {\n              path: '/user',\n              name: 'user',\n              label: '用户管理',\n              url: 'User'\n            }, {\n              label: '其他',\n              children: [{\n                path: '/page1',\n                name: 'page1',\n                label: '页面1',\n                url: 'Page1'\n              }, {\n                path: '/page2',\n                name: 'page2',\n                label: '页面2',\n                url: 'Page2'\n              }]\n            }];\n          }\n          break;\n        default:\n          {\n            menu = [{\n              path: '/home',\n              name: 'home',\n              label: '首页',\n              url: 'Home'\n            }, {\n              path: '/mall',\n              name: 'mall',\n              label: '商品管理',\n              url: 'Mall'\n            }];\n          }\n          break;\n      }\n      state.menu = menu;\n      //存起来\n      Cookie.set('menu', JSON.stringify(menu));\n\n      //路由数据\n      state.menuArr = [];\n      this.commit('routerData', menu);\n\n      //添加路由\n      state.menuArr.forEach(item => {\n        router.addRoute('main', item);\n      });\n    },\n    //路由数据\n    routerData(state, menu) {\n      //处理路由\n      var menuArr = [];\n      menu.forEach(item => {\n        if (item.children) {\n          var val = [];\n          val = item.children.map(item2 => {\n            item2.component = () => import('@/views/' + item2.url);\n            return item2;\n          });\n          menuArr.push(...val);\n        } else {\n          item.component = () => import('@/views/' + item.url);\n          menuArr.push(item);\n        }\n      });\n      state.menuArr = menuArr;\n    }\n  }\n};","map":{"version":3,"names":["Cookie","state","uploadFileUrl","userInfo","info","isCollapse","tabList","path","name","label","url","menu","menuArr","mutations","collapseMenu","selectMenu","val","index","findIndex","item","push","closeMenu","forEach","splice","saveUserInfo","set","JSON","stringify","handleRouter","router","get","parse","children","commit","addRoute","routerData","map","item2","component"],"sources":["/Users/csh/Desktop/项目/VUE/src/store/modules/user.js"],"sourcesContent":["import Cookie from 'js-cookie'\n\nexport default {\n\tstate: {\n\t\tuploadFileUrl: '',\n\t\tuserInfo: { info: '' },\n\t\tisCollapse: false,\n\t\ttabList: [{ path: '/', name: 'home', label: '首页', url: 'Home/Home' }],\n\t\tmenu: [],\n\t\tmenuArr: [],\n\t},\n\n\tmutations: {\n\t\tcollapseMenu(state) {\n\t\t\tstate.isCollapse = !state.isCollapse\n\t\t},\n\t\tselectMenu(state, val) {\n\t\t\tif (val.name !== 'home') {\n\t\t\t\tconst index = state.tabList.findIndex(item => item.name === val.name)\n\t\t\t\tif (index < 0) {\n\t\t\t\t\tstate.tabList.push(val)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcloseMenu(state, val) {\n\t\t\tstate.tabList.forEach((item, index) => {\n\t\t\t\tif (item.name === val.name) {\n\t\t\t\t\tstate.tabList.splice(index, 1)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsaveUserInfo(state, val) {\n\t\t\tstate.userInfo = val\n\t\t\tCookie.set('userInfo', JSON.stringify(val))\n\t\t},\n\t\thandleRouter(state, router) {\n\t\t\tif (!Cookie.get('userInfo')) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar userInfo = JSON.parse(Cookie.get('userInfo'))\n\t\t\t//处理菜单\n\t\t\tvar menu = []\n\t\t\tswitch (userInfo.info) {\n\t\t\t\tcase 'admin':\n\t\t\t\t\t{\n\t\t\t\t\t\tmenu = [\n\t\t\t\t\t\t\t{ path: '/home', name: 'home', label: '首页', url: 'Home' },\n\t\t\t\t\t\t\t{ path: '/mall', name: 'mall', label: '商品管理', url: 'Mall' },\n\t\t\t\t\t\t\t{ path: '/user', name: 'user', label: '用户管理', url: 'User' },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: '其他',\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tpath: '/page1',\n\t\t\t\t\t\t\t\t\t\tname: 'page1',\n\t\t\t\t\t\t\t\t\t\tlabel: '页面1',\n\t\t\t\t\t\t\t\t\t\turl: 'Page1',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tpath: '/page2',\n\t\t\t\t\t\t\t\t\t\tname: 'page2',\n\t\t\t\t\t\t\t\t\t\tlabel: '页面2',\n\t\t\t\t\t\t\t\t\t\turl: 'Page2',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tmenu = [\n\t\t\t\t\t\t\t{ path: '/home', name: 'home', label: '首页', url: 'Home' },\n\t\t\t\t\t\t\t{ path: '/mall', name: 'mall', label: '商品管理', url: 'Mall' },\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tstate.menu = menu\n\t\t\t//存起来\n\t\t\tCookie.set('menu', JSON.stringify(menu))\n\n\t\t\t//路由数据\n\t\t\tstate.menuArr = []\n\t\t\tthis.commit('routerData', menu)\n\n\t\t\t//添加路由\n\t\t\tstate.menuArr.forEach(item => {\n\t\t\t\trouter.addRoute('main', item)\n\t\t\t})\n\t\t},\n\t\t//路由数据\n\t\trouterData(state, menu) {\n\t\t\t//处理路由\n\t\t\tvar menuArr = []\n\t\t\tmenu.forEach(item => {\n\t\t\t\tif (item.children) {\n\t\t\t\t\tvar val = []\n\t\t\t\t\tval = item.children.map(item2 => {\n\t\t\t\t\t\titem2.component = () => import('@/views/' + item2.url)\n\t\t\t\t\t\treturn item2\n\t\t\t\t\t})\n\t\t\t\t\tmenuArr.push(...val)\n\t\t\t\t} else {\n\t\t\t\t\titem.component = () => import('@/views/' + item.url)\n\t\t\t\t\tmenuArr.push(item)\n\t\t\t\t}\n\t\t\t})\n\t\t\tstate.menuArr = menuArr\n\t\t},\n\t},\n}\n"],"mappings":";AAAA,OAAOA,MAAM,MAAM,WAAW;AAE9B,eAAe;EACdC,KAAK,EAAE;IACNC,aAAa,EAAE,EAAE;IACjBC,QAAQ,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IACtBC,UAAU,EAAE,KAAK;IACjBC,OAAO,EAAE,CAAC;MAAEC,IAAI,EAAE,GAAG;MAAEC,IAAI,EAAE,MAAM;MAAEC,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE;IAAY,CAAC,CAAC;IACrEC,IAAI,EAAE,EAAE;IACRC,OAAO,EAAE;EACV,CAAC;EAEDC,SAAS,EAAE;IACVC,YAAYA,CAACb,KAAK,EAAE;MACnBA,KAAK,CAACI,UAAU,GAAG,CAACJ,KAAK,CAACI,UAAU;IACrC,CAAC;IACDU,UAAUA,CAACd,KAAK,EAAEe,GAAG,EAAE;MACtB,IAAIA,GAAG,CAACR,IAAI,KAAK,MAAM,EAAE;QACxB,MAAMS,KAAK,GAAGhB,KAAK,CAACK,OAAO,CAACY,SAAS,CAACC,IAAI,IAAIA,IAAI,CAACX,IAAI,KAAKQ,GAAG,CAACR,IAAI,CAAC;QACrE,IAAIS,KAAK,GAAG,CAAC,EAAE;UACdhB,KAAK,CAACK,OAAO,CAACc,IAAI,CAACJ,GAAG,CAAC;QACxB;MACD;IACD,CAAC;IACDK,SAASA,CAACpB,KAAK,EAAEe,GAAG,EAAE;MACrBf,KAAK,CAACK,OAAO,CAACgB,OAAO,CAAC,CAACH,IAAI,EAAEF,KAAK,KAAK;QACtC,IAAIE,IAAI,CAACX,IAAI,KAAKQ,GAAG,CAACR,IAAI,EAAE;UAC3BP,KAAK,CAACK,OAAO,CAACiB,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;QAC/B;MACD,CAAC,CAAC;IACH,CAAC;IACDO,YAAYA,CAACvB,KAAK,EAAEe,GAAG,EAAE;MACxBf,KAAK,CAACE,QAAQ,GAAGa,GAAG;MACpBhB,MAAM,CAACyB,GAAG,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACX,GAAG,CAAC,CAAC;IAC5C,CAAC;IACDY,YAAYA,CAAC3B,KAAK,EAAE4B,MAAM,EAAE;MAC3B,IAAI,CAAC7B,MAAM,CAAC8B,GAAG,CAAC,UAAU,CAAC,EAAE;QAC5B;MACD;MACA,IAAI3B,QAAQ,GAAGuB,IAAI,CAACK,KAAK,CAAC/B,MAAM,CAAC8B,GAAG,CAAC,UAAU,CAAC,CAAC;MACjD;MACA,IAAInB,IAAI,GAAG,EAAE;MACb,QAAQR,QAAQ,CAACC,IAAI;QACpB,KAAK,OAAO;UACX;YACCO,IAAI,GAAG,CACN;cAAEJ,IAAI,EAAE,OAAO;cAAEC,IAAI,EAAE,MAAM;cAAEC,KAAK,EAAE,IAAI;cAAEC,GAAG,EAAE;YAAO,CAAC,EACzD;cAAEH,IAAI,EAAE,OAAO;cAAEC,IAAI,EAAE,MAAM;cAAEC,KAAK,EAAE,MAAM;cAAEC,GAAG,EAAE;YAAO,CAAC,EAC3D;cAAEH,IAAI,EAAE,OAAO;cAAEC,IAAI,EAAE,MAAM;cAAEC,KAAK,EAAE,MAAM;cAAEC,GAAG,EAAE;YAAO,CAAC,EAC3D;cACCD,KAAK,EAAE,IAAI;cACXuB,QAAQ,EAAE,CACT;gBACCzB,IAAI,EAAE,QAAQ;gBACdC,IAAI,EAAE,OAAO;gBACbC,KAAK,EAAE,KAAK;gBACZC,GAAG,EAAE;cACN,CAAC,EACD;gBACCH,IAAI,EAAE,QAAQ;gBACdC,IAAI,EAAE,OAAO;gBACbC,KAAK,EAAE,KAAK;gBACZC,GAAG,EAAE;cACN,CAAC;YAEH,CAAC,CACD;UACF;UACA;QACD;UACC;YACCC,IAAI,GAAG,CACN;cAAEJ,IAAI,EAAE,OAAO;cAAEC,IAAI,EAAE,MAAM;cAAEC,KAAK,EAAE,IAAI;cAAEC,GAAG,EAAE;YAAO,CAAC,EACzD;cAAEH,IAAI,EAAE,OAAO;cAAEC,IAAI,EAAE,MAAM;cAAEC,KAAK,EAAE,MAAM;cAAEC,GAAG,EAAE;YAAO,CAAC,CAC3D;UACF;UACA;MAAK;MAEPT,KAAK,CAACU,IAAI,GAAGA,IAAI;MACjB;MACAX,MAAM,CAACyB,GAAG,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAChB,IAAI,CAAC,CAAC;;MAExC;MACAV,KAAK,CAACW,OAAO,GAAG,EAAE;MAClB,IAAI,CAACqB,MAAM,CAAC,YAAY,EAAEtB,IAAI,CAAC;;MAE/B;MACAV,KAAK,CAACW,OAAO,CAACU,OAAO,CAACH,IAAI,IAAI;QAC7BU,MAAM,CAACK,QAAQ,CAAC,MAAM,EAAEf,IAAI,CAAC;MAC9B,CAAC,CAAC;IACH,CAAC;IACD;IACAgB,UAAUA,CAAClC,KAAK,EAAEU,IAAI,EAAE;MACvB;MACA,IAAIC,OAAO,GAAG,EAAE;MAChBD,IAAI,CAACW,OAAO,CAACH,IAAI,IAAI;QACpB,IAAIA,IAAI,CAACa,QAAQ,EAAE;UAClB,IAAIhB,GAAG,GAAG,EAAE;UACZA,GAAG,GAAGG,IAAI,CAACa,QAAQ,CAACI,GAAG,CAACC,KAAK,IAAI;YAChCA,KAAK,CAACC,SAAS,GAAG,MAAM,MAAM,CAAC,UAAU,GAAGD,KAAK,CAAC3B,GAAG,CAAC;YACtD,OAAO2B,KAAK;UACb,CAAC,CAAC;UACFzB,OAAO,CAACQ,IAAI,CAAC,GAAGJ,GAAG,CAAC;QACrB,CAAC,MAAM;UACNG,IAAI,CAACmB,SAAS,GAAG,MAAM,MAAM,CAAC,UAAU,GAAGnB,IAAI,CAACT,GAAG,CAAC;UACpDE,OAAO,CAACQ,IAAI,CAACD,IAAI,CAAC;QACnB;MACD,CAAC,CAAC;MACFlB,KAAK,CAACW,OAAO,GAAGA,OAAO;IACxB;EACD;AACD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}